<ion-header fixed>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>{{'Permissions' | translate}}</ion-title>
    <ion-buttons slot="end">
      <app-language-switch></app-language-switch>
      <ion-buttons slot="primary">
        <ion-button size="large" color="secondary" (click)="openPermission()">
            <ion-icon slot="start" name="add-circle"></ion-icon>
          Add Permission
        </ion-button>
      </ion-buttons>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-grid padding>
    <ion-row>
      <ion-col no-padding class="mat-elevation-z2">
        <ion-toolbar>
          
          <ion-searchbar color="transparent" mode="ios" [placeholder]="'Search' | translate" [showCancelButton]="false"
            (ionInput)="applyFilter($event.target.value)" (ionClear)="applyFilter('')" (ionCancel)="applyFilter($event.target.value)"></ion-searchbar>
        </ion-toolbar>

        <table mat-table [dataSource]="dataSource" matSort class="width-100">

          <!-- Position Column -->
          <ng-container matColumnDef="positionId">
            <th mat-header-cell mat-sort-header *matHeaderCellDef> {{'Position' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{getPosition(element.positionId)?.name}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="requestId">
            <th mat-header-cell mat-sort-header *matHeaderCellDef> {{'Request Name' | translate}} </th>
            <td mat-cell *matCellDef="let element">{{getRequest(element.requestId)?.name}} </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="validity">
            <th mat-header-cell mat-sort-header *matHeaderCellDef> {{'Validity' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{getValidity(element.validity)?.name}} </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="permission">
            <th mat-header-cell mat-sort-header *matHeaderCellDef> {{'Permission' | translate}} </th>
            <td mat-cell *matCellDef="let element"> {{getPermission(element.permission)?.name}} </td>
          </ng-container>
          <ng-container matColumnDef="options">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell style="text-align: right;" *matCellDef="let element">
              <ion-button fill="clear" size="small" (click)="openPermission(element)">
                <ion-icon slot="icon-only" name="create"></ion-icon>
              </ion-button>
              <ion-button fill="clear" size="small" color="danger" (click)="delete(element)">
                <ion-icon slot="icon-only" name="close"></ion-icon>
              </ion-button>
            </td>
          </ng-container>
          <ng-container matColumnDef="footerMessage">
            <td mat-footer-cell *matFooterCellDef colspan="5" class="footer">
              {{'No Permissions Registered' | translate}}
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          <tr mat-footer-row [hidden]="dataSource.data && dataSource.data.length" *matFooterRowDef="['footerMessage']"></tr>

        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>